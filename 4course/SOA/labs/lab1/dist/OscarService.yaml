openapi: 3.0.3
info:
  title: Oscar service REST endpoints
  description: Additional operations related to calling the API of the first service for SOA Lab1
  version: 1.0.0
servers:
  - url: 'https://localhost:8080/api/v1'
paths:
  /oscar/directors/get-loosers:
    get:
      summary: Get a list of directors whose films have not won any Oscars
      description: Get a list of directors whose films have not won any Oscars
      operationId: getDirectorsLoosers
      tags:
        - Oscars
      responses:
        '200':
          description: Returns a list of directors whose films have not won any Oscars
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/PersonResponseList"
        '400':
          description: Bad Request
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error400"
        '404':
          description: Not Found
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error404"
        '500':
          description: Internal server error
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error500"
        default:
          description: Returns error code, message and time
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/ErrorDefault"
  /oscar/movies/honor-by-length/{min-length}/oscars-to-add:
    patch:
      summary: Additionally award all films with a duration longer than the specified number of Oscars
      description: Additionally award all films with a duration longer than the specified number of Oscars
      operationId: awardAllFilmsWithDurationLonger
      tags:
        - Oscars
      parameters:
        - name: min-length
          in: path
          required: true
          description: Minimal duration to award (seconds)
          schema:
            type: integer
            format: int64
            nullable: false
            minimum: 1
            example: 1
      responses:
        '200':
          description: Returns honored movies
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/MovieResponse"
        '400':
          description: Bad Request
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error400"
        '404':
          description: Not Found
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error404"
        '500':
          description: Internal server error
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/Error500"
        default:
          description: Returns error code, message and time
          content:
            application/xml:
              schema:
                $ref: "#/components/schemas/ErrorDefault"
    
components:
  schemas:
    MovieGenre:
      type: string
      enum:
        - ACTION
        - MUSICAL
        - ADVENTURE
        - FANTASY
      nullable: true
      example: ACTION
    MpaaRating:
      type: string
      enum:
        - G
        - PG
        - R
        - NC_17
      nullable: true
      example: G
    Color:
      type: string
      enum:
        - BLACK
        - YELLOW
        - ORANGE
        - WHITE
      nullable: true
      example: BLACK
    Country:
      type: string
      enum:
        - UNITED_KINGDOM
        - FRANCE
        - SPAIN
        - INDIA
      nullable: true
      example: UNITED_KINGDOM
    Person:
      type: object
      required:
        - name
        - height
      properties:
        name:
          type: string
          nullable: false
          empty: false
          example: Andrey
        birthday:
          type: string
          format: date
          nullable: true
          example: 2024-09-13
        height:
          type: number
          format: float
          minimum: 0
          nullable: false
          example: 180
        hairColor:
          $ref: "#/components/schemas/Color"
        nationality:
          $ref: "#/components/schemas/Country"
    PersonResponseList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Person"
    Coordinates:
      type: object
      required:
        - x
        - y
      properties:
        x:
          type: number
          format: double
          nullable: false
          example: 1.1
        y:
          type: integer
          format: int32
          nullable: false
          example: 2
    Movie:
      type: object
      required:
        - name
        - coordinates
        - oscarsCount
        - genre
        - mpaaRating
      properties:
        name:
          type: string
          nullable: false
          empty: false
          example: Interstellar
        coordinates:
          $ref: "#/components/schemas/Coordinates"
        oscarsCount:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          example: 2
        genre:
          $ref: "#/components/schemas/MovieGenre"
        mpaaRating:
          $ref: "#/components/schemas/MpaaRating"
        screenwriter:
          $ref: "#/components/schemas/Person"
    MovieResponse:
      type: object
      required:
        - id
        - name
        - coordinates
        - creationDate
        - oscarsCount
        - genre
        - mpaaRating
        - screenwriter
      properties:
        id:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          example: 1
        name:
          type: string
          nullable: false
          empty: false
          example: Interstellar
        coordinates:
          $ref: "#/components/schemas/Coordinates"
        creationDate:
          type: string
          format: date-time
          nullable: false
          example: 2024-09-13T00:00:13
        oscarsCount:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          example: 1
        genre:
          $ref: "#/components/schemas/MovieGenre"
        mpaaRating:
          $ref: "#/components/schemas/MpaaRating"
        screenwriter:
          $ref: "#/components/schemas/Person"
        duration:
          type: integer
          format: int64
          nullable: false
          minimum: 1
          example: 1
    MovieResponseList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/MovieResponse"
    ErrorDefault:
      type: object
      required:
        - code
        - message
        - time
      properties:
        code:
          type: integer
          format: int32
          example: 500
        message:
          type: string
          example: Internal server error
        time:
          type: string
          format: date-time
          example: 2024-09-13T00:00:13
    Error400:
      type: object
      required:
        - code
        - message
        - time
      properties:
        code:
          type: integer
          format: int32
          example: 400
        message:
          type: string
          example: Invalid input data
        time:
          type: string
          format: date-time
          example: 2024-09-13T00:00:13
    Error404:
      type: object
      required:
        - code
        - message
        - time
      properties:
        code:
          type: integer
          format: int32
          example: 404
        message:
          type: string
          example: Not Found
        time:
          type: string
          format: date-time
          example: 2024-09-13T00:00:13
    Error500:
      type: object
      required:
        - code
        - message
        - time
      properties:
        code:
          type: integer
          format: int32
          example: 500
        message:
          type: string
          example: Internal Server Error
        time:
          type: string
          format: date-time
          example: 2024-09-13T00:00:13